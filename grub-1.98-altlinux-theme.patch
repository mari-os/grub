diff -urN grub2/conf/common.mk grub2.new/conf/common.mk
--- grub2/conf/common.mk	2010-03-06 20:52:26 +0000
+++ grub2.new/conf/common.mk	2010-03-06 22:49:27 +0000
@@ -1040,7 +1040,7 @@
 %: util/grub.d/%.in config.status
 	./config.status --file=$@:$<
 	chmod +x $@
-grub-mkconfig_SCRIPTS = 00_header 30_os-prober 40_custom
+grub-mkconfig_SCRIPTS = 00_header 05_altlinux_theme 30_os-prober 40_custom
 ifneq (, $(host_kernel))
 grub-mkconfig_SCRIPTS += 10_$(host_kernel)
 endif
diff -urN grub2/conf/common.rmk grub2.new/conf/common.rmk
--- grub2/conf/common.rmk	2010-03-06 20:51:37 +0000
+++ grub2.new/conf/common.rmk	2010-03-06 22:57:24 +0000
@@ -201,7 +201,7 @@
 %: util/grub.d/%.in config.status
 	./config.status --file=$@:$<
 	chmod +x $@
-grub-mkconfig_SCRIPTS = 00_header 30_os-prober 40_custom
+grub-mkconfig_SCRIPTS = 00_header 05_altlinux_theme 30_os-prober 40_custom
 ifneq (, $(host_kernel))
 grub-mkconfig_SCRIPTS += 10_$(host_kernel)
 endif
diff -urN grub2/DISTLIST grub2.new/DISTLIST
--- grub2/DISTLIST	2010-03-06 20:52:27 +0000
+++ grub2.new/DISTLIST	2010-03-06 22:56:57 +0000
@@ -747,6 +747,7 @@
 util/usb.c
 util/elf/grub-mkimage.c
 util/grub.d/00_header.in
+util/grub.d/05_altlinux_theme.in
 util/grub.d/10_hurd.in
 util/grub.d/10_kfreebsd.in
 util/grub.d/10_linux.in
diff -urN grub2/util/grub.d/05_altlinux_theme.in grub2.new/util/grub.d/05_altlinux_theme.in
--- grub2/util/grub.d/05_altlinux_theme.in	1970-01-01 00:00:00 +0000
+++ grub2.new/util/grub.d/05_altlinux_theme.in	2010-03-06 22:53:28 +0000
@@ -0,0 +1,59 @@
+#! /bin/sh -e
+
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+bindir=@bindir@
+libdir=@libdir@
+. ${libdir}/grub/grub-mkconfig_lib
+
+WALLPAPER="/etc/bootsplash/themes/current/images/silent-800x600.jpg"
+COLOR_NORMAL="black/black"
+COLOR_HIGHLIGHT="magenta/black"
+
+set_mono_theme()
+{
+  cat << EOF
+set menu_color_normal=white/black
+set menu_color_highlight=black/light-gray
+EOF
+}
+
+# check for usable backgrounds
+use_bg=false
+if [ "$GRUB_TERMINAL_OUTPUT" = "gfxterm" ] ; then
+  for i in /boot/grub/`basename ${WALLPAPER}` ${WALLPAPER} ; do
+    if is_path_readable_by_grub $i ; then 
+      bg=$i
+      case ${bg} in
+        *.png)		reader=png ;;
+        *.tga)		reader=tga ;;
+        *.jpg|*.jpeg)	reader=jpeg ;;
+      esac
+      if test -e /boot/grub/${reader}.mod ; then
+        echo "Found background image: `basename ${bg}`" >&2
+        use_bg=true
+        break
+      fi
+    fi
+  done
+fi
+
+# set the background if possible
+if ${use_bg} ; then
+  prepare_grub_to_access_device `${grub_probe} --target=device ${bg}`
+  cat << EOF
+insmod ${reader}
+if background_image `make_system_path_relative_to_its_root ${bg}` ; then
+  set color_normal=${COLOR_NORMAL}
+  set color_highlight=${COLOR_HIGHLIGHT}
+else
+EOF
+fi
+
+# otherwise, set a monochromatic theme for Ubuntu
+if ${use_bg} ; then
+  set_mono_theme | sed -e "s/^/  /g"
+  echo "fi"
+else
+  set_mono_theme
+fi
