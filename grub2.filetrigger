#!/bin/sh
#
# RPM filetrigger for grub2 menu update.
#

. /etc/sysconfig/grub2

[ "x$GRUB_AUTOUPDATE_CFG" != "xno" ] || exit 0
[ "x$GRUB_AUTOUPDATE_CFG" != "xfalse" ] || exit 0

[ ! -z "$GRUB_AUTOUPDATE_CFGNAME" ] || GRUB_AUTOUPDATE_CFGNAME=/boot/grub/grub.cfg

if egrep -qs '^/boot/vmlinuz|^/boot/xen|^/boot/memtest|^/usr/lib/grub|^/usr/lib64/grub'; then
	/usr/sbin/grub-mkconfig -o $GRUB_AUTOUPDATE_CFGNAME ||:
fi
